{
    "homepage": "https://github.com/zzzgydi/clash-verge",
    "description": "A Clash GUI based on tauri",
    "version": "1.1.0",
    "license": "GPL-3.0-only",
    "suggest": {
        "Clash.Meta": "Koolar/clash-meta",
        "Clash.Meta compatible": "Koolar/clash-meta-compatible"
    },
    "url": "https://github.com/zzzgydi/clash-verge/releases/download/v1.1.0/Clash.Verge_1.1.0_x64_portable.zip",
    "hash": "9ee4c1ed838f59e5b2e6984aeb4f262a514cddbc0b58b78ef40884007cfa4159",
    "shortcuts": [
        [
            "Clash Verge.exe",
            "Clash Verge"
        ]
    ],
    "persist": ".config",
    "post_install": [
        "# https://github.com/zzzgydi/clash-verge/issues/21#issuecomment-1097467046=",
        "if (!(Test-Path \"$persist_dir\\.config\\PORTABLE\")) {",
        "    New-Item -Path \"$persist_dir\\.config\\PORTABLE\" -ItemType file | Out-Null",
        "}",
        "",
        "if ((Test-Path \"$scoopdir\\apps\\clash-meta\\current\\clash-meta.exe\")) {",
        "    Rename-Item \"$dir\\clash-meta.exe\" \"clash-meta.exe.bac\"",
        "    New-Item \"$dir\\clash-meta.exe\" -ItemType HardLink -Value \"$scoopdir\\apps\\clash-meta\\current\\clash-meta.exe\" -Force | Out-Null",
        "} elseif ((Test-Path \"$scoopdir\\apps\\clash-meta-compatible\\current\\clash-meta.exe\")) {",
        "    Rename-Item \"$dir\\clash-meta.exe\" \"clash-meta.exe.bac\"",
        "    New-Item \"$dir\\clash-meta.exe\" -ItemType HardLink -Value \"$scoopdir\\apps\\clash-meta-compatible\\current\\clash-meta.exe\" -Force | Out-Null",
        "}"
    ],
    "uninstaller": {
        "script": [
            "$service = Get-Service -Name clash_verge_service -ErrorAction SilentlyContinue",
            "if ($service -ne $null) {",
            "    if (!([Security.Principal.WindowsPrincipal][Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole]::Administrator)) {",
            "        Start-Process PowerShell -Verb RunAs \"-NoProfile -ExecutionPolicy Bypass -Command `\"sc.exe delete clash_verge_service`\"\"",
            "    } else {",
            "        sc.exe delete clash_verge_service",
            "    }",
            "}"
        ]
    },
    "checkver": "github",
    "autoupdate": {
        "url": "https://github.com/zzzgydi/clash-verge/releases/download/v$version/Clash.Verge_$version_x64_portable.zip"
    }
}
