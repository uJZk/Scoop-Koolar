{
    "version": "1.7.1",
    "description": "Jellyfin Media Player. Jellyfin Desktop Client based on Plex Media Player",
    "homepage": "https://github.com/jellyfin/jellyfin-media-player",
    "license": "GPL-2.0-or-later",
    "architecture": {
        "32bit": {
            "hash": "6fc7e1f5313f17170d48297d0f9c5a05107cf81ccc1db14286ab73377db364d4",
            "url": "https://github.com/jellyfin/jellyfin-media-player/releases/download/v1.7.1/JellyfinMediaPlayer-1.7.1-windows-x86.exe"
        },
        "64bit": {
            "hash": "27151aee03cefea6d220348b3275b9474aa169a850745d9066b0f4290a5ff24e",
            "url": "https://github.com/jellyfin/jellyfin-media-player/releases/download/v1.7.1/JellyfinMediaPlayer-1.7.1-windows-x64.exe"
        }
    },
    "pre_install": [
        "if (-not (Test-Path \"$persist_dir\\APPDATA\\QtWebEngine\\Default\\Local Storage\")) {",
        "   New-item \"$persist_dir\" -ItemType Directory -ErrorAction SilentlyContinue | Out-Null",
        "   New-item \"$persist_dir\\APPDATA\" -ItemType Directory -ErrorAction SilentlyContinue | Out-Null",
        "   New-item \"$persist_dir\\APPDATA\\QtWebEngine\" -ItemType Directory -ErrorAction SilentlyContinue | Out-Null",
        "   New-item \"$persist_dir\\APPDATA\\QtWebEngine\\Default\" -ItemType Directory -ErrorAction SilentlyContinue | Out-Null",
        "   New-item \"$persist_dir\\APPDATA\\QtWebEngine\\Default\\Local Storage\" -ItemType Directory -ErrorAction SilentlyContinue | Out-Null",
        "   Move-Item -Path \"$env:APPDATA\\Jellyfin Media Player\\QtWebEngine\\Default\\Local Storage\" -Destination \"$persist_dir\\APPDATA\\QtWebEngine\\Default\\Local Storage\" -ErrorAction SilentlyContinue",
        "} else {",
        "   Remove-Item -Path \"$env:APPDATA\\Jellyfin Media Player\" -Recurse -ErrorAction SilentlyContinue",
        "}"
    ],
    "post_install": [
        "Import-Module $(Join-Path $(Find-BucketDirectory -Root -Name Koolar) scripts/DoradoUtils.psm1)",
        "Mount-ExternalRuntimeData -Source \"$persist_dir\\APPDATA\\QtWebEngine\\Default\\Local Storage\" -Target \"$env:APPDATA\\Jellyfin Media Player\\QtWebEngine\\Default\\Local Storage\"",
        "Remove-Module -Name DoradoUtils",
        "",
        "$extracted = \"$dir\\extracted\"",
        "$msi = \"$dir\\msi\"",
        "Expand-DarkArchive \"$dir\\$fname\" \"$extracted\"",
        "Expand-MsiArchive \"$extracted\\AttachedContainer\\PMP.msi\" \"$msi\"",
        "Move-Item \"$msi\\Msi\\*\" \"$dir\" -Force",
        "Remove-Item $extracted, $msi, \"$dir\\$fname\" -Force -Recurse"
    ],
    "uninstaller": {
        "script": [
            "Import-Module $(Join-Path $(Find-BucketDirectory -Root -Name Koolar) scripts/DoradoUtils.psm1)",
            "Dismount-ExternalRuntimeData -Target \"$env:APPDATA\\Jellyfin Media Player\\QtWebEngine\\Default\\Local Storage\"",
            "Remove-Module -Name DoradoUtils",
            "",
            "Remove-Item -Path \"$env:APPDATA\\Jellyfin Media Player\" -Recurse -ErrorAction SilentlyContinue",
            "Remove-Item -Path \"$env:APPDATA\\JellyfinMediaPlayer\" -Recurse -ErrorAction SilentlyContinue"
        ]
    },
    "shortcuts": [
        [
            "JellyfinMediaPlayer.exe",
            "Jellyfin Media Player"
        ]
    ],
    "checkver": "github",
    "autoupdate": {
        "architecture": {
            "32bit": {
                "url": "https://github.com/jellyfin/jellyfin-media-player/releases/download/v$version/JellyfinMediaPlayer-$version-windows-x86.exe"
            },
            "64bit": {
                "url": "https://github.com/jellyfin/jellyfin-media-player/releases/download/v$version/JellyfinMediaPlayer-$version-windows-x64.exe"
            }
        }
    }
}
